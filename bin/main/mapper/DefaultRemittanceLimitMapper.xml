<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.DefaultRemittanceLimitMapper">

    <select id="selectDefaultLimit" resultType="DefaultRemittanceLimitResponse">
    <!-- 현재 기본 한도 조회 -->
        SELECT 
            drl.id,
            drl.daily_limit as dailyLimit,
            drl.monthly_limit as monthlyLimit,
            drl.single_limit as singleLimit,
            drl.description,
            a.name as adminName,
            drl.is_active as isActive,
            drl.created_at as createdAt,
            drl.updated_at as updatedAt
        FROM default_remittance_limit drl
        LEFT JOIN admin a ON drl.admin_id = a.id
    </select>

    <update id="updateDefaultLimit" parameterType="DefaultRemittanceLimit">
        <!-- 기본 한도 업데이트 -->
        UPDATE default_remittance_limit 
        SET 
            daily_limit = #{dailyLimit},
            monthly_limit = #{monthlyLimit},
            single_limit = #{singleLimit},
            description = #{description},
            admin_id = #{adminId},
            updated_at = NOW()
        WHERE is_active = true
    </update>

</mapper> 