# 스테이징환경 비용 분석

## AWS 프리티어로 가능한 스테이징환경

### ✅ 무료로 가능한 구성

#### 1. 최소 구성 (완전 무료)
```
RDS MySQL (db.t3.micro) - 750시간/월
ElastiCache Redis (cache.t3.micro) - 750시간/월
S3 스토리지 - 5GB
ECS Fargate - 20GB-초 vCPU, 40GB-초 메모리
```

#### 2. 권장 구성 (월 $5-10)
```
RDS MySQL (db.t3.small) - $25/월
ElastiCache Redis (cache.t3.small) - $15/월
S3 스토리지 - $1/월
ECS Fargate - $5-10/월
ALB - $16/월
```

### 💡 비용 최적화 전략

#### 1. 스테이징환경 자동 시작/중지
```yaml
# GitHub Actions에서 스케줄링
schedule:
  - cron: '0 9 * * 1-5'  # 평일 오전 9시 시작
  - cron: '0 18 * * 1-5' # 평일 오후 6시 중지
```

#### 2. 개발 시간에만 운영
- **평일 9시-18시**: 스테이징환경 활성화
- **주말/야간**: 스테이징환경 중지
- **월 비용 절약**: 약 60-70%

#### 3. 공유 스테이징환경
- 여러 개발자가 하나의 스테이징환경 공유
- 데이터베이스 초기화 스크립트로 테스트 데이터 관리

## 스테이징환경 vs 로컬환경

### 🏠 로컬환경
- **목적**: 개발 및 단위 테스트
- **장점**: 즉시 실행, 디버깅 용이
- **단점**: 운영환경과 차이, 네트워크 환경 차이

### 🧪 스테이징환경
- **목적**: 운영 전 최종 테스트
- **장점**: 운영환경과 동일, 실제 네트워크 테스트
- **단점**: 비용 발생, 배포 시간 소요

## 배포 방식 비교

### 1. 로컬에서 스테이징 설정 테스트
```bash
# 로컬에서 스테이징 프로파일로 실행
$env:SPRING_PROFILES_ACTIVE="staging"
./gradlew bootRun
```
- **장점**: 빠른 테스트, 비용 없음
- **단점**: 실제 AWS 서비스와 다름

### 2. 실제 스테이징환경에 배포
```bash
# GitHub Actions로 스테이징 배포
git push origin develop  # 자동으로 스테이징 배포
```
- **장점**: 실제 환경과 동일
- **단점**: 배포 시간, 비용 발생

## 권장 구성

### 개발 단계별 환경 사용

1. **개발 단계**: 로컬환경 (local)
2. **통합 테스트**: 스테이징환경 (staging)
3. **운영 배포**: 운영환경 (prod)

### 비용 효율적인 스테이징환경

```yaml
# GitHub Actions 스케줄링
name: Staging Environment Management
on:
  schedule:
    - cron: '0 9 * * 1-5'  # 평일 오전 9시 시작
    - cron: '0 18 * * 1-5' # 평일 오후 6시 중지
  workflow_dispatch:  # 수동 실행 가능
```

**예상 월 비용**: $5-15 (스케줄링 적용 시)

